{
  "title": "EDA Backend API Requirements",
  "version": "1.0.0",
  "baseUrl": "http://192.168.1.147:8080/api/eda",
  "endpoints": [
    {
      "id": 1,
      "method": "GET",
      "path": "/histogram/{edaId}/{featureName}",
      "description": "Get histogram bin data for a numeric feature",
      "priority": "HIGH",
      "requestExample": "/histogram/eda_123/age",
      "responseExample": {
        "featureName": "age",
        "bins": [
          { "range": "18-25", "count": 150, "percentage": 15.0, "lowerBound": 18, "upperBound": 25 },
          { "range": "26-33", "count": 200, "percentage": 20.0, "lowerBound": 26, "upperBound": 33 },
          { "range": "34-41", "count": 180, "percentage": 18.0, "lowerBound": 34, "upperBound": 41 },
          { "range": "42-49", "count": 170, "percentage": 17.0, "lowerBound": 42, "upperBound": 49 },
          { "range": "50-57", "count": 140, "percentage": 14.0, "lowerBound": 50, "upperBound": 57 },
          { "range": "58-65", "count": 100, "percentage": 10.0, "lowerBound": 58, "upperBound": 65 },
          { "range": "66-73", "count": 50, "percentage": 5.0, "lowerBound": 66, "upperBound": 73 },
          { "range": "74-79", "count": 10, "percentage": 1.0, "lowerBound": 74, "upperBound": 79 }
        ],
        "binCount": 8,
        "totalValues": 1000
      },
      "implementation": "Calculate equal-width bins (default 10) or use Sturges' rule: bins = 1 + log2(n)"
    },
    {
      "id": 2,
      "method": "GET",
      "path": "/categorical/{edaId}/{featureName}",
      "description": "Get top N categorical values with counts",
      "priority": "HIGH",
      "queryParams": {
        "topN": { "type": "integer", "default": 10, "description": "Number of top values to return" }
      },
      "requestExample": "/categorical/eda_123/education?topN=10",
      "responseExample": {
        "featureName": "education",
        "values": [
          { "value": "Bachelor", "count": 450, "percentage": 45.0 },
          { "value": "Master", "count": 300, "percentage": 30.0 },
          { "value": "PhD", "count": 150, "percentage": 15.0 },
          { "value": "High School", "count": 100, "percentage": 10.0 }
        ],
        "totalUnique": 4,
        "totalValues": 1000,
        "otherCount": 0
      },
      "implementation": "SELECT value, COUNT(*) as count FROM dataset WHERE column = featureName GROUP BY value ORDER BY count DESC LIMIT topN"
    },
    {
      "id": 3,
      "method": "GET",
      "path": "/missing-pattern/{edaId}",
      "description": "Get missing data analysis for all features",
      "priority": "HIGH",
      "requestExample": "/missing-pattern/eda_123",
      "responseExample": {
        "features": [
          { "name": "age", "missingCount": 0, "missingPercentage": 0.0, "dataType": "NUMERIC" },
          { "name": "income", "missingCount": 15, "missingPercentage": 1.5, "dataType": "NUMERIC" },
          { "name": "address", "missingCount": 200, "missingPercentage": 20.0, "dataType": "STRING" }
        ],
        "totalRows": 1000,
        "totalMissing": 215,
        "overallCompleteness": 97.8
      },
      "implementation": "Aggregate missing counts from existing feature statistics"
    },
    {
      "id": 4,
      "method": "GET",
      "path": "/outliers/{edaId}",
      "description": "Detect outliers for numeric features",
      "priority": "MEDIUM",
      "queryParams": {
        "method": { "type": "string", "enum": ["IQR", "ZSCORE"], "default": "IQR" }
      },
      "requestExample": "/outliers/eda_123?method=IQR",
      "responseExample": {
        "features": [
          {
            "name": "age",
            "outlierCount": 5,
            "method": "IQR",
            "lowerBound": 10.5,
            "upperBound": 85.5,
            "q1": 30,
            "q3": 60,
            "iqr": 30,
            "outlierIndices": [12, 45, 67, 89, 234]
          },
          {
            "name": "income",
            "outlierCount": 12,
            "method": "IQR",
            "lowerBound": -5000,
            "upperBound": 180000,
            "q1": 50000,
            "q3": 120000,
            "iqr": 70000,
            "outlierIndices": [3, 17, 23, 45, 67, 89, 123, 156, 189, 234, 567, 789]
          }
        ]
      },
      "implementation": "IQR method: outliers = values < Q1 - 1.5*IQR OR values > Q3 + 1.5*IQR. Z-score: outliers = |z-score| > 3"
    },
    {
      "id": 5,
      "method": "GET",
      "path": "/scatter/{edaId}",
      "description": "Get paired data points for scatter plot visualization",
      "priority": "MEDIUM",
      "queryParams": {
        "feature1": { "type": "string", "required": true },
        "feature2": { "type": "string", "required": true },
        "limit": { "type": "integer", "default": 1000, "description": "Max points to return" }
      },
      "requestExample": "/scatter/eda_123?feature1=age&feature2=income&limit=1000",
      "responseExample": {
        "feature1": "age",
        "feature2": "income",
        "points": [
          { "x": 25, "y": 50000 },
          { "x": 32, "y": 65000 },
          { "x": 45, "y": 85000 },
          { "x": 28, "y": 55000 }
        ],
        "totalPoints": 1000,
        "correlation": -0.48,
        "trend": "negative"
      },
      "implementation": "SELECT feature1, feature2 FROM dataset WHERE feature1 IS NOT NULL AND feature2 IS NOT NULL LIMIT limit"
    },
    {
      "id": 6,
      "method": "GET",
      "path": "/export/{edaId}/pdf",
      "description": "Export complete EDA report as PDF",
      "priority": "LOW",
      "requestExample": "/export/eda_123/pdf",
      "responseType": "application/pdf",
      "responseHeaders": {
        "Content-Type": "application/pdf",
        "Content-Disposition": "attachment; filename=eda-report-{edaId}.pdf"
      },
      "implementation": "Use iText or Apache PDFBox to generate PDF with all charts and statistics"
    },
    {
      "id": 7,
      "method": "GET",
      "path": "/export/{edaId}/csv",
      "description": "Export feature statistics as CSV",
      "priority": "LOW",
      "requestExample": "/export/eda_123/csv",
      "responseType": "text/csv",
      "responseHeaders": {
        "Content-Type": "text/csv",
        "Content-Disposition": "attachment; filename=eda-stats-{edaId}.csv"
      },
      "csvFormat": "Feature,Type,Count,Missing,Mean,StdDev,Min,Max,Q1,Median,Q3\nage,NUMERIC,1000,0,49.5,15.2,18,79,35,50,65",
      "implementation": "Convert feature statistics JSON to CSV format"
    },
    {
      "id": 8,
      "method": "GET",
      "path": "/box-plot/{edaId}/{featureName}",
      "description": "Get box plot data (Q1, Q2, Q3, whiskers, outliers)",
      "priority": "LOW",
      "requestExample": "/box-plot/eda_123/age",
      "responseExample": {
        "featureName": "age",
        "min": 18,
        "q1": 35,
        "median": 50,
        "q3": 65,
        "max": 79,
        "lowerWhisker": 20,
        "upperWhisker": 75,
        "outliers": [15, 16, 85, 87, 90]
      },
      "implementation": "Calculate quartiles and identify outliers beyond 1.5*IQR"
    }
  ],
  "modelClasses": [
    {
      "name": "HistogramResponse",
      "fields": [
        { "name": "featureName", "type": "String" },
        { "name": "bins", "type": "List<BinData>" },
        { "name": "binCount", "type": "Integer" },
        { "name": "totalValues", "type": "Integer" }
      ]
    },
    {
      "name": "BinData",
      "fields": [
        { "name": "range", "type": "String" },
        { "name": "count", "type": "Integer" },
        { "name": "percentage", "type": "Double" },
        { "name": "lowerBound", "type": "Double" },
        { "name": "upperBound", "type": "Double" }
      ]
    },
    {
      "name": "CategoricalResponse",
      "fields": [
        { "name": "featureName", "type": "String" },
        { "name": "values", "type": "List<CategoryValue>" },
        { "name": "totalUnique", "type": "Integer" },
        { "name": "totalValues", "type": "Integer" },
        { "name": "otherCount", "type": "Integer" }
      ]
    },
    {
      "name": "CategoryValue",
      "fields": [
        { "name": "value", "type": "String" },
        { "name": "count", "type": "Integer" },
        { "name": "percentage", "type": "Double" }
      ]
    },
    {
      "name": "MissingDataResponse",
      "fields": [
        { "name": "features", "type": "List<MissingFeature>" },
        { "name": "totalRows", "type": "Integer" },
        { "name": "totalMissing", "type": "Integer" },
        { "name": "overallCompleteness", "type": "Double" }
      ]
    },
    {
      "name": "MissingFeature",
      "fields": [
        { "name": "name", "type": "String" },
        { "name": "missingCount", "type": "Integer" },
        { "name": "missingPercentage", "type": "Double" },
        { "name": "dataType", "type": "String" }
      ]
    },
    {
      "name": "OutliersResponse",
      "fields": [
        { "name": "features", "type": "List<OutlierFeature>" }
      ]
    },
    {
      "name": "OutlierFeature",
      "fields": [
        { "name": "name", "type": "String" },
        { "name": "outlierCount", "type": "Integer" },
        { "name": "method", "type": "String" },
        { "name": "lowerBound", "type": "Double" },
        { "name": "upperBound", "type": "Double" },
        { "name": "q1", "type": "Double" },
        { "name": "q3", "type": "Double" },
        { "name": "iqr", "type": "Double" },
        { "name": "outlierIndices", "type": "List<Integer>" }
      ]
    },
    {
      "name": "ScatterDataResponse",
      "fields": [
        { "name": "feature1", "type": "String" },
        { "name": "feature2", "type": "String" },
        { "name": "points", "type": "List<DataPoint>" },
        { "name": "totalPoints", "type": "Integer" },
        { "name": "correlation", "type": "Double" },
        { "name": "trend", "type": "String" }
      ]
    },
    {
      "name": "DataPoint",
      "fields": [
        { "name": "x", "type": "Double" },
        { "name": "y", "type": "Double" }
      ]
    }
  ],
  "implementationNotes": {
    "histogram": "Use equal-width binning. Calculate bin width = (max - min) / binCount. Alternatively use Sturges' rule or Freedman-Diaconis rule.",
    "categorical": "Sort by frequency descending. If more than topN categories, group remaining as 'Other'.",
    "outliers": "IQR method is more robust to extreme values. Z-score method assumes normal distribution.",
    "scatterPlot": "For large datasets (>10k rows), implement random sampling to limit = 1000 points for performance.",
    "export": "PDF generation: Include all summary stats, charts (as images), correlation matrix, and insights. Use company branding if available."
  }
}
