/* Custom React Flow Styles for Relationship Diagram */

/* Define a custom connection color that's more visible than near-black primary */
:root {
  --relationship-line-color: #6366f1; /* Indigo-500 - bright and visible */
}

.dark {
  --relationship-line-color: #818cf8; /* Indigo-400 - brighter for dark mode */
}

/* CRITICAL FIX: Override ALL default edge styling to prevent thick black lines */
.react-flow__edge-path {
  stroke: var(--relationship-line-color) !important;
  stroke-width: 2px !important;
  fill: none !important;
}

.react-flow__edge {
  pointer-events: all !important;
}

.react-flow__edge:hover .react-flow__edge-path {
  stroke-width: 3px !important;
  stroke: var(--relationship-line-color) !important;
  filter: brightness(1.2) !important;
}

.react-flow__edge.selected .react-flow__edge-path {
  stroke: var(--relationship-line-color) !important;
  stroke-width: 3px !important;
  filter: brightness(1.3) drop-shadow(0 0 6px var(--relationship-line-color)) !important;
}

/* Markers (arrow heads) */
.react-flow__arrowhead,
.react-flow__edge-marker {
  fill: var(--relationship-line-color) !important;
}

/* Edge labels */
.react-flow__edge-text {
  font-size: 11px !important;
  font-weight: 500 !important;
  fill: hsl(var(--foreground)) !important;
}

.react-flow__edge-textbg {
  fill: hsl(var(--background)) !important;
  fill-opacity: 0.95 !important;
}

/* Connection line while dragging */
.react-flow__connection-path {
  stroke: var(--relationship-line-color) !important;
  stroke-width: 2px !important;
  stroke-dasharray: 5, 5 !important;
  animation: dash 0.5s linear infinite !important;
  fill: none !important;
}

@keyframes dash {
  to {
    stroke-dashoffset: -10;
  }
}

/* Connection handles - visible and attractive */
.react-flow__handle {
  width: 12px !important;
  height: 12px !important;
  background: var(--relationship-line-color) !important;
  border: 2px solid hsl(var(--background)) !important;
  box-shadow: 0 0 0 1px var(--relationship-line-color), 0 2px 4px rgba(0, 0, 0, 0.1) !important;
  transition: all 0.2s ease !important;
  opacity: 1 !important;
}

.react-flow__handle:hover {
  transform: scale(1.4) !important;
  box-shadow: 0 0 0 2px var(--relationship-line-color), 0 4px 12px rgba(99, 102, 241, 0.4) !important;
}

.react-flow__handle-connecting {
  background: var(--relationship-line-color) !important;
  box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.3) !important;
  animation: pulse 1s ease-in-out infinite !important;
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.3);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(99, 102, 241, 0.1);
  }
}

.react-flow__handle-valid {
  background: #10b981 !important;
  box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.3) !important;
}

/* Controls */
.react-flow__controls {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.react-flow__controls-button {
  background: hsl(var(--background)) !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
  transition: all 0.2s ease !important;
}

.react-flow__controls-button:hover {
  background: hsl(var(--muted)) !important;
}

.react-flow__controls-button svg {
  fill: hsl(var(--foreground)) !important;
}

/* Minimap */
.react-flow__minimap {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
  background: hsl(var(--background)) !important;
}

.react-flow__minimap-mask {
  fill: rgba(99, 102, 241, 0.1) !important;
}

.react-flow__minimap-node {
  fill: hsl(var(--muted)) !important;
  stroke: hsl(var(--border)) !important;
}

/* Remove node selection outline */
.react-flow__node.selected,
.react-flow__node:focus,
.react-flow__node:focus-visible {
  outline: none !important;
}

.react-flow__node.selected .react-flow__handle {
  background: var(--relationship-line-color) !important;
  box-shadow: 0 0 0 2px var(--relationship-line-color), 0 4px 12px rgba(99, 102, 241, 0.4) !important;
}

/* Background */
.react-flow__background {
  background-color: transparent !important;
}

/* Remove any default strokes or fills */
svg.react-flow__edges path {
  stroke: var(--relationship-line-color) !important;
  fill: none !important;
}

/* Force all edge interactions to use the custom color */
.react-flow__edge-interaction {
  stroke: transparent !important;
  fill: none !important;
}
